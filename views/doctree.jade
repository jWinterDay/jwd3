

extends layout

block content
    p(id="totalUsers")

    section
        hgroup
            h1 Документы
        fieldset
            //legend Docs tree

            div(id="doctreeContainer")

            form(id="uploadForm", enctype="multipart/form-data", action="/api/protected/journal/upload", method="post")
                div(hidden)
                    input(type="file", name="doc", id="hiddenSelectFile", accept=".pdf")
                    input(type="submit", name="submit", value="upload doc")
                    input(id="parentId", type="text", name="parentId")
                    input(id="fileOper", type="text", name="fileOper")
                    input(id="fileName", type="text", name="fileName")
                
                div
                    -if ( roles && roles.indexOf("admin") !== -1 ) {
                        input(id="addFolderDoc", type="button", class="btn btn-primary has-margin", value="Добавить папку")
                        input(id="addDoc", type="button", class="btn btn-primary has-margin", value="Добавить файл")
                        input(id="editDoc", type="button", class="btn btn-primary has-margin", value="Изменить файл")
                        input(id="delDoc", type="button", class="btn btn-danger has-margin", value="Удалить файл")
                    - }
                    input(id="downloadDoc", type="button", class="btn btn-success has-margin", value="Скачать")
                span(id = "status")


    input(id="csrftoken", type="hidden", value="#{csrftoken}")
    
    div(id="pdfDiv")        
        div(id="pdfPage")
        div(id="docContainer", class="pdf-content")
            canvas(id="pdfCanvas")
            div(id="ldiv")

    link(rel="stylesheet", href="/libs/jquery-treetable/css/jquery.treetable.css", type="text/css")
    link(rel="stylesheet", href="/libs/jquery-treetable/css/jquery.treetable.theme.default.css", type="text/css")
    link(rel="stylesheet", href="/libs/simplePagination/simplePagination.css")
    link(rel="stylesheet", href="/stylesheets/doctree.css")
    link(rel="stylesheet", href="/libs/sweetalert/dist/sweetalert.css")

    //link(rel="stylesheet", href="/libs/bootstrap-3.3.7-dist/css/bootstrap.css")

    script(src="/libs/jquery-cookie-1.4.1/jquery.cookie.js")
    script(src="/libs/jquery.form/jquery.form.js")
    script(src="/libs/jqGrid/js/i18n/grid.locale-en.js")
    script(src="/libs/jquery-treetable/jquery.treetable.js")
    script(src="/libs/pdfjs/pdfjs-ui-utils.js")
    script(src="/libs/simplePagination/jquery.simplePagination.js ")
    script(src="/libs/sweetalert/dist/sweetalert.min.js")
    script(src="/libs/filedownload/filedownload.js")

    script(src="/libs/underscore/underscore.js")
    script(src="/socket.io/socket.io.js")


    script(src="/libs/pdfjs/pdf.js")
    script(src="/libs/pdfjs-dist/web/compatibility.js")
    script(src="/libs/pdfjs-dist/build/pdf.combined.js")
    script(src="/libs/pdfjs-dist/web/pdf_viewer.js")

    script(src="/scripts/doctree.js")


    